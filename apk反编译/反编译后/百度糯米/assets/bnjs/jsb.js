!function(n){function e(){if(o&&c&&i&&a){t._isAllReady=t.isAllReady=!0,r=!1,f();var n=document.createEvent("Events");n.initEvent("BNJSReady"),document.dispatchEvent(n)}else setTimeout(e,20)}if(!n.BNJS){var t={version:"1.7",idCounter:0,OUTPUT_RESULTS:{},CALLBACK:{},isAllReady:!1,_isAllReady:!1,status:!0},o=!1,c=!1,i=!1,a=!1,r=!0;n.BNJS=t,t.enableDebug=function(e){n.onerror=function(n,t,o,c){if("function"==typeof e)e({message:n,script:t,line:o,column:c});else{var i=[];i.push("代码有错误。"),i.push("\n错误信息：",n),i.push("\n出错文件：",t),i.push("\n出错位置：",o+"行，"+c+"列"),alert(i.join(""))}}},t._setStatus=function(n){t.status=n},t.callNative=function(n,e,o){if(t.status){var c="ID_"+ ++t.idCounter;t.CALLBACK[c]="undefined"!=typeof o?o:function(){};var i,a=prompt("callNative",'{"cmd":'+n+',"args":'+e+',"key":"'+c+'"}');try{i=JSON.parse(a)}catch(r){console.error(r.message)}return t.OUTPUT_RESULTS[c]}},t.callBackJs=function(n,e){t.status&&(this.OUTPUT_RESULTS[e]=n,"undefined"!=typeof t.CALLBACK[e]&&t.CALLBACK[e](n))},t.execSync=function(n,e,o){if(t.status){var c={service:n,action:e};o=o||{};var i,a=prompt(JSON.stringify(c),JSON.stringify(o));try{i=JSON.parse(a)}catch(r){console.error(r.message)}var u=i.errno,s=i.errmsg;return 0!==u&&console.error("service:"+n+" action:"+e+" error:"+s),i}},t.exec=function(n,e,o,c){if(t.status){var i={service:n,action:e};o=o||{},t.callNative(JSON.stringify(i),JSON.stringify(o),c)}};var u=function(){for(var n,e,t={},o=0,c=arguments.length;c>o;o++)if(n=arguments[o],"object"==typeof n)for(e in n)n.hasOwnProperty(e)&&n[e]&&(t[e]=n[e]);return t};!function(n){n.location=n.location||{},n._updateLocation=function(e){var t;e&&(t=e.data),t=t||{hasLocation:!1},n.location=u(n.location,t),i=!0},"undefined"!=typeof jsbLocationString?(n.location=jsbLocationString.data,i=!0):n._updateLocation(n.execSync("location","getLocation")),n.location.watchLocation=function(e){var t={onLocationChanged:function(){}};e=u(t,e||{}),n.exec("location","watchLocation",null,function(n){0===n.errno&&e.onLocationChanged()})}}(t),function(n){n.device=n.device||{};var e=null;e="undefined"!=typeof jsbDeviceString?jsbDeviceString.data:n.execSync("env","getDevice").data,n.device={name:e.name,platform:e.platform,os:e.os,screenWidth:e.screenWidth,screenHeight:e.screenHeight},o=!0}(t),function(n){n.env=n.env||{};var e=null;e="undefined"!=typeof jsbEnvString?jsbEnvString.data:n.execSync("env","getEnv").data;var t=[];e.sidList&&e.sidList.length>0&&(t=e.sidList.split("_")),n.env={network:function(e){var t=n.execSync("env","getNetType");e(t.data)},getConfig:function(e){var t=n.execSync("env","getConfig");e(t)},cuid:e.cuid,appName:e.appName,appVersion:e.appVersion,appChannel:e.appChannel,sidList:t},a=!0}(t),function(n){n.account=n.account||{},n._updateAccount=n._updateAccount||function(e){var t;e&&(t=e),t=t||{isLogin:0},n.account=u(n.account,t),c=!0},"undefined"!=typeof jsbAccountString?(n.account=jsbAccountString.data,c=!0):n._updateAccount(n.execSync("account","getAccount").data),n.account.watchAccount=function(e){var t={onAccountChanged:function(){}};e=u(t,e||{}),n.exec("account","watchAccount",null,function(n){0===n.errno&&e.onAccountChanged()})},n.account.login=function(e){var t={onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("account","login",null,function(t){if(0===t.errno)n._updateAccount(n.execSync("account","getAccount").data),e.onSuccess();else{var o={};o.errno=t.errno,o.errmsg=t.errmsg,e.onFail(o)}})},n.account.getMobile=function(e){var t={onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("account","getMobile",null,function(n){if(0===n.errno)e.onSuccess(n.data);else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})},n.account.getSecretAccount=function(e){var t={onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("account","getSecretAccount",null,function(n){if(0===n.errno)e.onSuccess(n.data);else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})}}(t),function(n){n.http=n.http||{},n.http.get=function(e){var t={respType:"json",cacheType:!1,onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("http","get",e,function(n){if(0===n.errno)e.onSuccess(n.data);else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})},n.http.post=function(e){var t={respType:"json",onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("http","post",e,function(n){if(0===n.errno)e.onSuccess(n.data);else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})},n.http.getNA=function(e){var t={respType:"json",cacheType:!1,onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("http","getNA",e,function(n){if(0===n.errno)e.onSuccess(n.data);else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})},n.http.postNA=function(e){var t={respType:"json",onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("http","postNA",e,function(n){if(0===n.errno)e.onSuccess(n.data);else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})},n.http.getCatgData=function(e){var t={onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("http","getCatgData",e,function(n){if(0===n.errno)e.onSuccess(n.data);else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})},n.http.sign=function(e){var t={source:"",customerId:0,callback:null};e=u(t,e||{});var o=n.execSync("http","sign",e);e.callback(o.data)}}(t),function(n){n.page=n.page||{},n.page.start=function(e,t,o,c){var i={};i.url=e,i.direction=c,t&&"object"==typeof t?(i.params=t,o&&1===o?n.execSync("page","loadPage",i):n.execSync("page","start",i)):t&&"number"==typeof t&&1===t?n.execSync("page","loadPage",i):n.execSync("page","start",i)},n.page.back=function(){n.execSync("page","back")},n.page.getData=function(e){var t=null;t=r&&"undefined"!=typeof jsbGetDataString?jsbGetDataString:n.execSync("page","getData").data,e(t)},n.page.startPay=function(e){var t={onSuccess:function(){},onFail:function(){},onCancel:function(){}};e=u(t,e||{}),n.exec("page","startPay",e,function(n){if(0===n.errno)e.onSuccess(n.data);else if(-1===n.errno)e.onCancel();else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})},n.page.registerReceiver=function(e,t){var o={name:e};n.exec("page","registerReceiver",o,t)},n.page.sendBroadcast=function(e,t){var o={name:e,params:t};n.execSync("page","sendBroadcast",o)},n.page.startBind=function(e){var t={onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("page","startBind",null,function(n){if(0===n.errno)e.onSuccess();else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})},n.page.onBtnBackClick=function(e){e=e||{},"function"==typeof e.callback&&n.exec("page","onBtnBackClick",null,function(n){e.callback(n)})},n.page.orderConfirm=function(e){e=e||{},n.exec("page","orderConfirm",e.params,function(n){if(0===n.errno)e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess(n.data);else if(e.onFail&&"function"==typeof e.onFail)try{var t=JSON.parse(n.errmsg);n.data=t,e.onFail(n)}catch(o){n.data={},e.onFail(n)}})},n.page.reShow=function(e){"function"==typeof e&&n.exec("page","reShow",null,function(){e()})},n.page.enableBounce=function(){},n.page.onCityChange=function(e){n.exec("page","onCityChange",null,e)},n.page.onMessage=function(e,t){n.exec("page","onMessage",null,function(n){if(0===n.errno)e(n.data);else{var o={};o.errno=n.errno,o.errmsg=n.errmsg,t(o)}})},n.page.postMessage=function(e){n.exec("page","postMessage",e)},n.page.getAlbum=function(e){var t={quality:100,onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("page","nativeAlbumPage",e,function(n){if(0===n.errno)e.onSuccess(n.data);else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})},n.page.leave=function(e){"function"==typeof e&&n.exec("page","leave",null,e)}}(t),function(n){n.hardware=n.hardware||{},n.hardware.scanQRCode=function(e){n.exec("hardware","scanQRCode",null,e)},n.hardware.getWifiAround=function(e){n.exec("hardware","getWifiAround",null,e)}}(t),function(n){n.ui=n.ui||{},n.ui.toast={show:function(e,t){var o={};o.text=e||"no message",o.length=t||1,n.execSync("ui","showToast",o)}},n.ui.dialog={show:function(e){var t={title:"",message:"",ok:"确定",cancel:"",onConfirm:null,onCancel:null};e=u(t,e||{}),n.exec("ui","showDialog",e,function(n){"ok"===n.data.button&&e.onConfirm&&"function"==typeof e.onConfirm?e.onConfirm():"cancel"===n.data.button&&e.onCancel&&"function"==typeof e.onCancel&&e.onCancel()})},showLoading:function(e){var t={};t.message=e||"我们正在努力加载中...",n.execSync("ui","showLoading",t)},hideLoading:function(){n.execSync("ui","dismissLoading")}},n.ui.title={setTitle:function(e){var t={};t.title=e||"标题",n.execSync("ui","setTitleText",t)},addActionButton:function(e){var t={icon:"",text:"",style:0,callback:null};e=u(t,e||{}),n.exec("ui","addActionButton",e,e.callback)},addT10NoticeButton:function(){n.execSync("ui","addT10NoticeButton")},setClickableTitle:function(e,t){n.exec("ui","setTitleForClick",{title:e||"标题"},t||function(){})},removeBtnAll:function(){n.execSync("ui","removeBtnAll")},removeBtnByTag:function(e){n.execSync("ui","removeBtnByTag",{tag:e})},addTagList:function(e){var t={tagList:"",selectIndex:0,callback:null};e=u(t,e||{}),n.exec("ui","addTagList",e,e.callback)}},n.ui.share=function(e){var t={title:"分享",content:"",imgUrl:"",url:"",onSuccess:function(){},onFail:function(){}};e=u(t,e||{}),n.exec("ui","share",e,function(n){if(0===n.errno)e.onSuccess();else{var t={};t.errno=n.errno,t.errmsg=n.errmsg,e.onFail(t)}})},n.ui.showLoadingPage=function(){n.execSync("ui","showLoadingPage")},n.ui.hideLoadingPage=function(){n.execSync("ui","hideLoadingPage")},n.ui.showErrorPage=function(e,t){var o={};e&&"string"==typeof e?(o.text=e,o.flag=t&&"number"==typeof t?t:0):e&&"number"==typeof e?(o.text="网络不给力哦...",o.flag=e):(o.text="网络不给力哦...",o.flag=1),n.execSync("ui","showErrorPage",o)},n.ui.hideErrorPage=function(){n.execSync("ui","hideErrorPage")},n.ui.toggleBtnBack=function(){var e=!0;return function(t){void 0===t&&(t=!e),t=!!t,e=t,n.execSync("ui","toggleBtnBack",{bShow:t})}}(),n.ui.nativeInterfere=function(e){var t={pullDown:!1,pullUp:!1,pullDownCallback:function(){},pullUpCallback:function(){}};e=u(t,e||{}),n.exec("ui","nativeInterfere",e,function(n){"pulldown"===n.data.type.toLowerCase()?"function"==typeof e.pullDownCallback&&e.pullDownCallback(n):"pullup"===n.data.type.toLowerCase()&&"function"==typeof e.pullUpCallback&&e.pullUpCallback(n)})},n.ui.closePullAction=function(e){"string"!=typeof e&&(e="");var t=["pulldown","pullup"];-1!==t.indexOf(e.toLowerCase())&&n.exec("ui","closePullAction",{type:e})}}(t),function(n){n.statistic=n.statistic||{},n.statistic.addLog=function(e){n.execSync("utils","addLog",e)},n.statistic.addCtag=function(e){n.execSync("utils","addCtag",e)},n.statistic.addMTJ=function(e){n.execSync("utils","addMTJ",e)}}(t),function(n){n.localStorage={setItem:function(e,t,o,c){n.exec("localStorage","setItem",{k:e,v:t},function(n){0===n.errno?o&&o(n):c&&c(n)})},getItem:function(e,t,o){n.exec("localStorage","getItem",{k:e},function(n){0===n.errno?t&&t(n):o&&o(n)})},removeItem:function(e,t,o){n.exec("localStorage","removeItem",{k:e},function(n){0===n.errno?t&&t(n):o&&o(n)})}}}(t);var s=function(){"use strict";var e,t=!1,o={each:function(n,e){var t=Object.prototype;if("[object Array]"===t.toString.call(n)){for(var o=n.length,c=0;o>c;c++)if(e(c,n[c])===!1)return}else if(n)for(var i in n)if(t.hasOwnProperty.call(n,i)&&e(i,n[i])===!1)return},extend:function(n){function e(e,t){n[e]=t}for(var t=arguments.length,c=1;t>c;c++)o.each(arguments[c],e);return n},serialize:function(n){var e=encodeURIComponent,t=[];return o.each(n,function(n,o){null!=o&&t.push(e(n)+"="+e(o))}),t.join("&")},bind:function(n,e){return Function.prototype.bind?n.bind(e):function(){n.apply(e,arguments)}},isVersionLte:function(n,e){n=n.split("."),e=e.split(".");for(var t=Math.min(n.length,e.length),o=0;t>o;o++){var c=+n[o],i=+e[o];if(i>c)return!0;if(c>i)return!1}return n.length<=e.length}},c={URL:"sample.log.nuomi.com/t.json",isNA:null,init:function(n){this.isNA="undefined"!=typeof n},getCUID:function(){return e.env&&e.env.cuid},getBNJSVersion:function(){return e.version},getAPPVersion:function(){return e.env&&e.env.appVersion},getPlatform:function(){return e.device&&e.device.platform},getOS:function(){return e.device&&e.device.os},getSidList:function(){return(e.env&&e.env.sidList||[]).join(",")},getComp:function(n){e.page.getData(function(e){n(e)})},send:function(n){n=n||{};try{n=o.extend({url:"http://"+this.URL,params:{},respType:"json",cacheType:"disable",headers:{},onSuccess:function(){},onFail:function(){}},n),e.http.get(n)}catch(t){this.fail({log:"send-core",err:t})}},fail:function(n){try{var e={target:"sidlog",tips:"na",type:"error",log:""};"string"==typeof n?e.log=n:o.extend(e,n||{});var t={};o.each(e,function(n,e){t["fe_"+n]=e}),this.send({params:t})}catch(c){}}},i=function(){function t(n,e){if(n=o.extend({client:"na",ua:navigator.userAgent,sid:c.getSidList(),cuid:c.getCUID(),v:[c.getBNJSVersion(),c.getAPPVersion(),c.getOS()].join(","),__:+new Date},n||{}),e=e||{},e.url&&(n.url=e.url),e.compid&&e.comppage){var t=encodeURIComponent,i=[];o.each({compid:e.compid,comppage:e.comppage},function(n,e){null!=e&&i.push(t(n)+":"+t(e))}),n.page=i.join(",")}return n}function i(n){try{c.getComp(function(e){c.send({params:t(n,e),onFail:function(n){c.fail({log:"send-fail-cb",res:n})}})})}catch(e){c.fail({log:"sidlog-send",err:e})}}function a(n){for(var e=[],t=n,c=50;c--;){var i=s?t.getAttribute(s):t.getAttribute("data-mon")||t.getAttribute("mon");if(i&&e.push(i),!t||t===document.body||t===t.parentNode)break;t=t.parentNode}e=e.join("&").split("&");for(var a={},r=e.length;r--;){var u=e[r],f=u.split("=");a[f[0]]=f[1]}var l={};return o.each(["page","area","element"],function(n,e){a.hasOwnProperty(e)&&(l[e]=a[e])}),l.area&&l.element?(o.extend(l,{action_type:"click"}),l):void 0}function r(){if(f)return!1;try{var e="ontouchstart"in n||n.DocumentTouch&&document instanceof n.DocumentTouch;if(!e)return!1;var t=c.getPlatform().toLowerCase(),o=c.getOS();switch(t){case"ios":if(o=+o,7>o)return!1;break;case"android":if(o=+(o+"").slice(3),isNaN(o)||14>o)return!1;break;default:return!1}return!0}catch(i){return!1}}function u(){function n(n){try{var e=a(n);if(!e)return;i(e)}catch(t){c.fail({log:"send-click",err:t})}}function e(n){return n.nodeType===Node.TEXT_NODE?n.parentNode:n}function t(){g=null,v=h=0,y=0}function o(n){try{if(n.touches.length>1)return t(),void 0;var o=+new Date;if(y>0&&m>o-y)return t(),y=o,void 0;y=o;var c=n.touches[0];g=e(c.target),d=c.pageX,p=c.pageY}catch(i){t()}}function u(n){try{if(!g)return;if(g!==e(n.target))return t(),void 0;var o=n.touches[0],c=Math.abs(o.pageX-d),i=Math.abs(o.pageY-p);if(c>x||i>x)return t(),void 0;if(v+=c,h+=i,v>b||h>b)return t(),void 0}catch(a){t()}}function s(){try{if(!g)return;var e=+new Date;if(e-y>S)return t(),void 0;if(v>b||h>b)return t(),void 0}catch(o){return t(),void 0}n(g)}function l(){t()}if(f||!r())return!1;var g,d,p,v,h,y,m=200,S=200,x=10,b=30;return document.body.addEventListener("touchstart",o,!0),document.body.addEventListener("touchend",s,!0),document.body.addEventListener("touchmove",u,!0),document.body.addEventListener("touchcancel",l,!0),f=!0,!0}var s,f=!1;return{init:function(){try{c.init(e),i({action_type:"pv"})}catch(n){c.fail({log:"init",err:n})}},set:function(n){if(n=n||{},n.click){var e=n.click;if(e.attr&&(s=e.attr),e.enable)try{u()}catch(t){c.fail({log:"bind-click",err:t})}}}}}();return{init:function(n){if(!t){t=!0,e=n;try{if(!o.isVersionLte("1.3",e.version||"1.0"))return;i.init(),e.sidlog={set:i.set}}catch(c){e&&(e.sidlog={set:function(){}})}}}}}(),f=function(n){return function(){try{s.init(n)}catch(e){}}}(t);e()}}(window);